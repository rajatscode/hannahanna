#!/bin/sh
# Pre-commit hook for hannahanna
# Runs rustfmt and clippy to ensure code quality
#
# Note: Tests are not run in pre-commit hooks to avoid conflicts
# with git operations and to keep commits fast. Tests should be run
# manually before pushing and will be validated in CI.

set -e

echo "Running pre-commit checks..."

# Run rustfmt
echo "â†’ Checking code formatting..."
if ! cargo fmt -- --check; then
    echo "âŒ Code formatting check failed!"
    echo "   Run 'cargo fmt' to fix formatting issues."
    exit 1
fi
echo "âœ“ Code formatting looks good"

# Run clippy
echo "â†’ Running clippy lints..."
if ! cargo clippy --all-targets --all-features -- -D warnings; then
    echo "âŒ Clippy found issues!"
    echo "   Fix the warnings above before committing."
    exit 1
fi
echo "âœ“ Clippy checks passed"

echo ""
echo "ğŸ’¡ Tip: Run 'cargo test' before pushing to ensure all tests pass"
echo "âœ… All pre-commit checks passed!"
